1998-06-06  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/osf1/glibtop_server.h: New file.
	
	* sysdeps/osf1/*.c: renamed all functions implementing
	features that don't need to be suid to '__s'.

	* sysdeps/names/procdata.c: Removed that file.
	
	* include/glibtop/*.h (glibtop_types_*): Changed declaration.
	
	* glibtop.h: Added `#include <types.h>'.

	* include/glibtop/types.h: New file - numeric constants
	for `glibtop_types_<feature>'.

	* sysdeps/names/*.c (glibtop_types_*): Using numeric
	constants from `types.h' instead of string constants.

1998-06-02  Federico Mena Quintero  <federico@nuclecu.unam.mx>

	* src/server/main.c: #include <locale.h>

1998-06-02  Martin Baulig  <baulig@merkur.uni-trier.de>

	* lib/open.c (glibtop_open): renamed to `glibtop_open__l'.

	* sysdeps/linux/open.c (glibtop_open): renamed to
	`glibtop_open__r'.

	* include/glibtop/open.h (GLIBTOP_OPEN_NO_OVERRIDE):
	tells `glibtop_open' to use the default server and not
	to check the environment variables.

	* include/glibtop/sysdeps.h (_glibtop_sysdeps):
	renamed 'dummy' member to 'features'.

	* src/proxy/*: new directory - proxy server.

	* include/glibtop/command.h (GLIBTOP_CMND_SYSDEPS):
	added definition here.

	* src/server/main.c (GLIBTOP_CMND_SYSDEPS): new
	command to get glibtop_server_features.

1998-06-01  Martin Baulig  <martin@home-of-linux.org>

	* NEWS: added more detailed description of today's and
	yesterday's changes.
	
	* include/glibtop/*.h: to use the ChangeLog entry from May 28:
	'__l' is a function defined in the client part;
	'__s' is a function defined in the sysdeps part and
	'__p' is a function that needs special priviledges.
	'__r' is mapped either on '__p' or on '__s'.
	the function without suffix is mapped on '__l'.

	* sysdeps/common/sysdeps.c: now using '__r' functions,
	they are #defined either as the '__p' or the '__s' ones.

	* sysdeps/linux/*.c: changed call of 'glibtop_init__r',
	it now takes two additional arguments.

	* examples/{first.c, second.c}: now using 'glibtop_init'
	instead of 'glibtop_init__r'.

	* include/glibtop/sysdeps.h: added 'dummy' member so
	'GLIBTOP_SYSDEPS_<feature>' now start with 1.

	* include/glibtop/*.h: we now #define 'glibtop_get_<feature>'
	as 'glibtop_get_<feature>__l' and 'glibtop_get_<feature>__r'
	either as the '__p' or the '__s' function.

	* lib/*.c: removed #if's - we now decide at runtime
	whether to use the server or to call the appropriate
	function for the sysdeps directory.

1998-05-28  Martin Baulig  <baulig@merkur.uni-trier.de>

	* src/server/main.c: we now use the '__p' functions,
	but only if the appropriate 'GLIBTOP_SUID_<feature>'
	has a non-zero value.
	
	* configure.in (@machine_incs@): always use 
	`-I$(top_srcdir)/sysdeps/@sysdeps_dir@'; it's no
	longer conditional.

	* examples/Makefile.am: removed the '_linux' examples.
	
	* sysdeps/linux/*.c: renamed all functions implementing
	features to '__s'.
	
	* lib/*.c: renamed all functions implementing features
	to '__l'; we only emit code for those functions if the
 	corresponding 'GLIBTOP_SUID_<feature>' has a positive value.
	
	* include/glibtop/*.h: added some new function suffixes:
	'__l' is a function defined in the client part;
	'__s' is a function defined in the sysdeps part and
	'__p' is a function that needs special priviledges.
	'__r' is mapped either on '__l' or on '__s'.
	
	* sysdeps/linux/glibtop_server.h: New file -
	defines system dependent constants 'GLIBTOP_SUID_<feature>'
	being either 'GLIBTOP_SYSDEPS_<feature>'+1 depending upon
 	whether or not this feature requires using the server.

	* lib/sysdeps.c: removed that file; it is no longer
	needed.

1998-05-25  Martin Baulig  <baulig@merkur.uni-trier.de>

	* src/server/main.c: Fixed `broken pipe' error when server
	is running SUID; accidentally uses setreuid () instead of
	setregid ().

1998-05-24  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/sun4/{open.c, mem.c, glibtop_machine.h}: added
	memory statistics.

	* include/glibtop/mem.h (_glibtop_mem): added `locked'
	member to this structure for SunOS.

1998-05-23  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/sun4/{open.c, cpu.c}: Started porting.
	Getting CPU usage now working. Took a lot of code
	from top-3.4.

	* sysdeps/sun4/glibtop_machine.h: New file.
	System dependend header file for SunOS.

	* configure.in (CFLAGS): added -D_IN_LIBGTOP

	* */Makefile.am (INCLUDES): removed -I$(includedir).

1998-05-22  Martin Baulig  <martin@home-of-linux.org>

	* doc/{libgtop-ref.sgml, libgtop-ref.dsl}: New files.
	This is a reference manual that gets automatically
	build from make-docbook.scm.

	* guile/make-docbook.scm: New file. Uses the guile
	interface of libgtop to create docbook documentation
	for all functions.

1998-05-21  Martin Baulig  <martin@home-of-linux.org>

	* Makefile.am: 'gtopConf.sh' has been renamed to
	'libgtopConf.sh'; variables in this script have changed.

	* lib/Makefile.am: uses '@LIBGTOP_SERVER@' instead of
	'@GTOP_SERVER@'.

	* configure.in: renamed variables for 'libgtopConf.sh.in'.

	* acconfig.h: added 'NEED_LIBGTOP'.

	* libgtopConf.sh.in: renamed from 'gtopConf.sh.in';
	we now define 'LIBGTOP_LIBDIR', 'LIBGTOP_INCLUDEDIR',
	'LIBGTOP_LIBS', 'LIBGTOP_INCS', 'LIBGTOP_GUILE_LIBS',
	'LIBGTOP_GUILE_INCS', 'LIBGTOP_BINDIR', 'LIBGTOP_SERVER',
	'libgtop_sysdeps_dir', 'libgtop_need_server',
	'libgtop_use_machine_h', 'libgtop_guile_found',
	'libgtop_want_names', 'libgtop_want_guile_names',
	'libgtop_want_examples'.
	
	* gtopConf.sh.in: renamed to 'libgtopConf.sh.in'.
	
	* acinclude.m4 (AC_LC_SYSDEPS): rewrote that macro -
	moved some of the code to 'macros/gnome-libgtop-sysdeps.m4';
	renamed variables: look at the ChangeLog entry for the
	new 'libgtopConf.sh.in' for details.

	* doc/gnome-hackers.sgml: added information about latest
	changes in 'acinclude.m4' and 'gtopConf.sh.in'.

	* Makefile.am: conditionally building 'examples' subdir,
	added 'copyright.txt' to EXTRA_DIST.

	* configure.in: added 'gtop_guile_found', 'gtop_want_names',
	'gtop_want_guile_names' and 'gtop_want_examples' for use in
	'gtopConf.sh.in'; added 'include' and 'include/glibtop' subdirs.

	* acconfig.h: added 'GLIBTOP_EXAMPLES'.

	* acinclude.m4 (AC_LC_SYSDEPS): define 'GLIBTOP_NAMES' when
	building libgtop and a new conditional 'GLIBTOP_NAMES'; added
	new parameter '--without-examples'; define 'GLIBTOP_EXAMPLES'
	and conditional 'GLIBTOP_EXAMPLES'.

	* gtopConf.sh.in: added 'GTOP_GUILE_FOUND', 'GTOP_WANT_NAMES',
	'GTOP_WANT_GUILE_NAMES' and 'GTOP_WANT_EXAMPLES'.

	* include/glibtop/Makefile.am: new file - header file
	now get properly installed and go into the distribution.

	* include/Makefile.am: new file

	* sysdeps/guile/Makefile.am: added 'DIST_SUBDIRS'

	* sysdeps/Makefile.am: added 'DIST_SUBDIRS'

	* doc/gnome-hackers.sgml: new file - short intro on how
	to use libgtop in the gnome project; especially 'configure'
	and 'gtopConf.sh'.

	* doc/gnome-hackers.dsl: new file - sets output filename
	and directory for 'gnome-hackers.sgml'.

	* doc/libgtop.dsl: most stuff from this file has moved
	to 'dbtohtml.dsl', it now only overrides the output
	filename and directory.

	* doc/dbtohtml.dsl: new file - contains most that was
	formerly in 'libgtop.dsl'.

	* configure.in: 'GTOP_INCS' and 'GTOP_LIBS' now really
	point to the places where everything gets installed and
	no longer to the build directory, so that they can be
	used in 'gtopConf.sh'.

	* acinclude.m4 (AC_LC_SYSDEPS): added 'machine_incs'
	which is used in 'INCLUDES' in several 'Makefile.am's;
	fixed typo 'ac_cv_want_names'; added missing AC_SUBST
	of 'use_glibtop_machine_h'.

1998-05-20  Martin Baulig  <baulig@merkur.uni-trier.de>

	* NEWS: added more detailed description of
	today's changes.
	
	* examples/third.c: added required check for
	'GLIBGTOP_GUILE_NAMES'.

	* sysdeps/Makefile.am: only build 'names' subdir
	when necessary.

	* sysdeps/guile/Makefile.am: only build 'names'
	subdir when necessary.

	* acinclude.m4 (AC_LC_SYSDEPS): added
	'--enable-libgtop-server' (default=auto),
 	'--enable-libgtop-names' (default=yes) and
	'--enable-libgtop-guile' (default=yes); we
	now define 'GLIBTOP_NAMES' here.

	* acconfig.h: added 'GLIBTOP_NAMES' and
	'GLIBTOP_GUILE_NAMES'

	* gtopConf.sh.in: added definition of 'GTOP_GUILE_LIBS'
	and 'GTOP_GUILE_INCS':

	'GTOP_LIBS' and 'GTOP_INCS' now contains everything
	that is needed to link with libgtop.

	'GTOP_GUILE_LIBS' and 'GTOP_GUILE_INCS' now contains
	everything that is needed to link with libgtop and its
	guile interface. When guile cannot be found on the system
	or building of the guile interface was disables, they are
	identical to 'GTOP_LIBS' and 'GTOP_INCS'
	[FIXME: Should I make them empty in this case?]

	* sysdeps/osf1/procuid.c (glibtop_get_proc_uid__r):
	added implementation for DEC OSF/1.
	
	* sysdeps/sun4/uptime.c: forgot to checkin

	* sysdeps/sun4/loadavg.c: forgot to checkin
	
	* sysdeps/osf1/uptime.c: forgot to checkin
	
	* sysdeps/osf1/loadavg.c: forgot to checkin

1998-05-19  Martin Baulig  <baulig@merkur.uni-trier.de>

	* sysdeps/stub/uptime.c: forgot this file all the
	time - stub for glibtop_uptime
	
	* sysdeps/stub/loadavg.c: forgot this file all the
 	time - stub for glibtop_loadavg

	* NEWS: Libgtop is now in the GNOME CVS Repository.

	* po/Makefile.in.in: new file

	* ABOUT-NLS: new file

1998-05-17  Martin Baulig  <martin@home-of-linux.org>

	* NEWS: added some stuff from 'README.LATEST'.

	* README.LATEST: incorporated content of this file
	into 'NEWS'.

	* include/glibtop: added references to
	'glibtop_types_* []' and 'glibtop_guile_types_*'.
		
	* sysdeps/guile/names: added implementations of
	'glibtop_types_*' and 'glibtop_description_*'.

	* sysdeps/names: added 'glibtop_types_* []',
	changed 'glibtop_descriptions_* []'.

1998-05-11  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/linux: finished the remaining proc_*
	functions.

	* sysdeps/guile: all guile functions now return
	the 'flags' member as first element of the list.

	* include/glibtop/procstate.h (glibtop_proc_state): 
	added 'uid' and 'gid' members; the library tries hard
	to set those values; it will never set the corresponding
	'flags' value unless the values are correct.

	* examples/first.c: added some nice features.

	* examples/second.c: new file - dumps out all
	currently running processes.

1998-05-11  Martin Baulig  <baulig@merkur.uni-trier.de>

	* sysdeps/linux/cpu.c: added 'frequency' member
	to 'struct _glibtop_cpu'.

	* include/glibtop/cpu.h (glibtop_cpu):
	added 'frequency' member

	* sysdeps/guile/names/procdata.c: splitted into
	procstate.c, procuid.c, procmem.c, proctime.c,
	procsignal.c, prockernel.c and procsegment.c

	* sysdeps/guile/procdata.c: splitted into
	procstate.c, procuid.c, procmem.c, proctime.c,
	procsignal.c, prockernel.c and procsegment.c

	* lib/procdata.c: splitted into
	procstate.c, procuid.c, procmem.c, proctime.c,
	procsignal.c, prockernel.c and procsegment.c

	* include/glibtop/procdata.h: splitted into
	procstate.h, procuid.h, procmem.h, proctime.h,
	procsignal.h, prockernel.h and procsegment.h

1998-05-10  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/osf1: port to OSF1 has been made.

1998-05-07  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/guile/sysdeps.c: changes to reflect the
	new flags of procdata.
	
	* sysdeps/common/sysdeps.c: changes to reflect the
	new flags of procdata.

	* sysdeps/linux/procdata.c: 'flags' member is now
	'unsigned long flags [2]'.  When we give
	glibtop_get_procdata () a pid of zero, only
	the flags are returned.

	* sysdeps/linux: now using static constant instead
	of #define for sysdeps.

	* include/glibtop/procdata.h: flags is now
	'unsigned long flags [2]'.

	* examples/first.c: output sysdeps

1998-05-03  Martin Baulig  <martin@home-of-linux.org>

	* ltconfig.diff: ugly hack: when cross compiling, we assume
	building shared libraries work.

1998-05-02  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/stub/init.c: new file - initializes global server.

	* sysdeps/linux/init.c: new file - initializes global server.

	* lib/init.c: new file - initializes global server.

	* glibtop.h: global changes to the interfaces, all functions except
	glibtop_open() and glibtop_close() that took a server argument have
	now a '__r' suffix; the original name is now a macro that uses
	glibtop_global_server.

1998-04-12  Martin Baulig  <martin@home-of-linux.org>

	* sysdeps/linux/open.c: we set server->os_version_code here,
	copied from gnome-utils/gtop/proc/version.c

	* sysdeps/linux/procdata.c: added implementation for this feature,
	mainly copied from gnome-utils/gtop/proc/readproc.c

	* glibtop.h: added os_version_code member to struct _glibtop

	* src/server/Makefile.am: moved here from src

	* src/server/version.c: moved here from src

	* src/server/output.c: moved here from src

	* src/server/main.c: moved here from src

	* src/mico/server.cc: new file - simple mico client

	* src/mico/client.cc: new file - simple mico client

	* src/mico/proclist.idl: new file - simple mico interface

	* src/version.c: moved to src/server
	
	* src/output.c: moved to src/server
	
	* src/main.c: moved to src/server

1998-04-11  Martin Baulig  <martin@home-of-linux.org>

	* doc/libgtop.sgml: added chapter on how to extend the library

	* sysdeps/names/procdata.c: new file - names for glibtop_procdata

	* sysdeps/linux/procdata.c: new file - copy from sysdeps/stub

	* sysdeps/stub/procdata.c: new file - stub for glibtop_procdata

	* sysdeps/guile/names/procdata.c: new file - guile names for glibtop_procdata

	* sysdeps/guile/procdata.c: new file - guile interface for glibtop_procdata

	* lib/procdata.c: new file - library function for glibtop_procdata

	* include/glibtop/procdata.h: new file - interface for glibtop_procdata -
	get detailed information about a process

1998-04-10  Martin Baulig  <martin@home-of-linux.org>

	* doc/libgtop.sgml: wrote some more documentation

	* NEWS: Added new directory sysdeps/guile/names. It is the guile interface
	to the gtop_names library found in sysdeps/names. Changed
	GLIBTOP_DESCRIPTIONS to GLIBTOP_NAMES and added GLIBTOP_GUILE_NAMES
	to the header files.

	* sysdeps/guile/names/boot.c: new file - added also
	cpu.c, mem.c, swap.c, uptime.c, loadavg.c, shm_limits.c,
	msg_limits.c, sem_limits.c, proclist.c and sysdeps.c
	to this directory.

	* sysdeps/guile/cpu.c: bugfixes

	* sysdeps/guile/proclist.c: bugfixes

	* sysdeps/names/sysdeps.c (glibtop_labels_sysdeps): more verbose now

	* examples/third.c: added gtop_guile_names library

	* doc/libgtop.sgml: documented guile interface

	* glibtop.h: changed GLIBTOP_DESCRIPTIONS to GLIBTOP_NAMES;
	added GLIBTOP_GUILE_NAMES when we have the gtop_guile_names
	library added in sysdeps/guile/names

1998-04-09  Martin Baulig  <martin@home-of-linux.org>

	* NEWS: Added new directories guile and names to sysdeps. In names are
	some string constants about the data stored in the structures.
	guile is a guile interface for the library. It is used in
	examples /third (which has been completely rewritten).
	The header files define things from names when GLIBTOP_DESCRIPTIONS
	if defined and/or from guile when HAVE_GUILE is defined.

	* sysdeps/names/cpu.c: new file, also added
	cpu.c, mem.c, swap.c, uptime.c loadavg.c, shm_limits.c,
	msg_limits.c, sem_limits.c, proclist.c and sysdeps.c to
	this directory

	* sysdeps/guile/boot.c: new file, also added
	cpu.c, mem.c, swap.c, uptime.c loadavg.c, shm_limits.c,
	msg_limits.c, sem_limits.c, proclist.c and sysdeps.c to
	this directory

	* sysdeps/common/sem_limits.c: moved to sysdeps/names
	
	* sysdeps/common/msg_limits.c: moved to sysdeps/names

	* sysdeps/common/sem_limits.c: moved to sysdeps/names

	* examples/third.c: completely rewritten - simple guile interpreter linked
	with libgtop_guile

	* examples/second.c: removed

1998-04-08  Martin Baulig  <martin@home-of-linux.org>

	* ANNOUNCE: new file

	* examples/third.scm: new file - sample guile file

	* examples/third.c: new file - guile wrapper for libgtop

	* examples/second.c: new file - simple guile test from guile-tut.info

	* README: new file

	* libgtop-mirror.sh: new file: mirror script for my web site

	* doc/dbtohtml.dsl: renamed to libgtop.dsl

1998-04-06  Martin Baulig  <martin@home-of-linux.org>

	* lib/command.c: some changes in the interface

	* src/main.c: some changes in the interface, we can now return
		some arbitrary data

	* lib/proclist.c: new file - library function for glibtop_proclist
	
	* sysdeps/linux/proclist.c: new file - implementation for glibtop_proclist
	
	* sysdeps/stub/proclist.c: new file - stub for glibtop_proclist
	
	* include/glibtop/proclist.h: new file - glibtop_proclist

	* include/glibtop/union.h: new file

	* lib/read_data.c: new file
	
	* include/glibtop/read_data.h: new file

	* sysdeps/common/xmalloc.c: new file - moved here from lib
	
	* sysdeps/common/error.c: new file - moved here from lib
	
	* lib/xmalloc.c: moved to sysdeps/common
	
	* lib/error.c: moved to sysdeps/common

1998-04-05  Martin Baulig  <martin@home-of-linux.org>

	* lib/shm_limits.c: new file - library function for
		glibtop_shm_limits

	* lib/msg_limits.c: new file - library function for
		glibtop_msg_limits

	* lib/sem_limits.c: new file - library function for
		glibtop_sem_limits

	* sysdeps/linux/shm_limits.c: new file - implementation for
		glibtop_shm_limits

	* sysdeps/linux/msg_limits.c: new file - implementation for
		glibtop_msg_limits

	* sysdeps/linux/sem_limits.c: new file - implementation for
		glibtop_sem_limits

	* sysdeps/stub/shm_limits.c: new file - stub for
		glibtop_shm_limits

	* sysdeps/stub/msg_limits.c: new file - stub for
		glibtop_msg_limits

	* sysdeps/stub/sem_limits.c: new file - stub for
		glibtop_sem_limits

	* sysdeps/common/shm_limits.c: new file - limit names

	* sysdeps/common/msg_limits.c: new file - limit names

	* sysdeps/common/sem_limits.c: new file - limit names
	
	* include/glibtop/shm_limits.h: new file - glibtop_shm_limits
	
	* include/glibtop/msg_limits.h: new file - glibtop_msg_limits

	* include/glibtop/sem_limits.h: new file - glibtop_sem_limits

	* sysdeps/common/sysdeps.c: moved here from sysdeps/stub

	* sysdeps/linux/sysdeps.c: moved to sysdeps/common

	* sysdeps/stub/sysdeps.c: moved to sysdeps/common

	* sysdeps/stub/ipc_limits.c: splitted info shm_limits.c, msg_limits.c
		and sem_limits.c

	* sysdeps/linux/ipc_limits.c: splitted into shm_limits.c, msg_limits.c
		and sem_limits.c

	* lib/ipc_limits.c: splitted into shm_limits.c, msg_limits.c
		and sem_limits.c

	* include/ipc_limits.h: splitted into shm_limits.h, msg_limits.h
		and sem_limits.s

	* lib/ipc_limits.c: new file - library function for
		glibtop_ipc_limits
	
	* sysdeps/linux/ipc_limits.c: new file - implementation for
		glibtop_ipc_limits
	
	* sysdeps/stub/ipc_limits.c: new file - stub for
		glibtop_ipc_limits
	
	* include/glibtop/ipc_limits.h: new file - glibtop_ipc_limits -
		sysv ipc limits

	* doc/libgtop.sgml: worked on documentation

	* lib/uptime.c: new file - library function for
		glibtop_uptime
	
	* lib/loadavg.c: new file - library function for
		glibtop_loadavg

	* lib/sysinfo.c: removed - splitted into
		uptime.c and loadavg.c

	* sysdeps/linux/uptime.c: new file - implementation for
		glibtop_uptime

	* sysdeps/linux/loadavg.c: new file - implementation for
		glibtop_loadavg

	* sysdeps/linux/sysinfo.c: removed - splitted into
		uptime.c and loadavg.c

	* sysdeps/stub/uptime.c: new file - stub for
		glibtop_uptime

	* sysdeps/stub/loadavg.c: new file - stub for
		glibtop_loadavg

	* sysdeps/stub/sysinfo.c: removed - splitted into
		uptime.c and loadavg.c
	
	* src/main.c: added GLIBTOP_CMND_UPTIME and
		GLIBTOP_CMND_LOADAVG implementation

	* include/glibtop/loadavg.h: new file - glibtop_loadavg
	
	* include/glibtop/uptime.h: new file - glibtop_uptime
	
	* include/glibtop/loadavg.h: removed - splitted into
		uptime.h and loadavg.h

	* src/main.c: added GLIBTOP_CMND_SYSDEPS implementation

	* lib/sysdeps.c: new file - library function for glibtop_sysdeps

	* sysdeps/linux/sysdeps.c: new file - copied from sysdeps/stub
	
	* sysdeps/stub/sysdeps.c: new file - implementation for glibtop_sysinfo -
		this is really the implementation and not just a stub
	
	* src/sysdeps.c: moved to sysdeps/stub - this file is now part
		of the library

	* lib/sysinfo.c: new file - library function for glibtop_sysinfo

	* sysdeps/linux/sysinfo.c: new file - linux version for glibtop_sysinfo

	* sysdeps/stub/sysinfo.c: new file - stub for glibtop_sysinfo

	* include/glibtop/sysinfo.h: new file - provides uptime, idle time
		and load averange.

	* po/libgtop.pot: removed file

	* sysdeps/linux/cpu.c: using long unsigned format
	* sysdeps/linux/mem.c: using long usigned format
	* sysdeps/linux/swap.c: using long unsigned format
	* examples/first.c: using long unsigned format

	* initial version.

