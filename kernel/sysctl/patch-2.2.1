diff -ru linux-2.2.1/Makefile hacker/Makefile
--- linux-2.2.1/Makefile	Sun Jan 31 22:45:42 1999
+++ hacker/Makefile	Sun Mar 21 16:10:41 1999
@@ -109,6 +109,7 @@
 DRIVERS		=drivers/block/block.a \
 		 drivers/char/char.a \
 	         drivers/misc/misc.a
+EXTRAS		=
 LIBS		=$(TOPDIR)/lib/lib.a
 SUBDIRS		=kernel drivers mm fs net ipc lib
 
@@ -186,6 +187,11 @@
 DRIVERS := $(DRIVERS) drivers/net/irda/irda_drivers.a
 endif
 
+ifdef CONFIG_LIBGTOP
+SUBDIRS := $(SUBDIRS) libgtop
+EXTRAS  := $(EXTRAS) libgtop/kernel.o
+endif
+
 include arch/$(ARCH)/Makefile
 
 .S.s:
@@ -206,6 +212,7 @@
 		$(FILESYSTEMS) \
 		$(NETWORKS) \
 		$(DRIVERS) \
+		$(EXTRAS) \
 		$(LIBS) \
 		--end-group \
 		-o vmlinux
diff -ru linux-2.2.1/arch/i386/config.in hacker/arch/i386/config.in
--- linux-2.2.1/arch/i386/config.in	Sun Jan 31 22:25:25 1999
+++ hacker/arch/i386/config.in	Sat Mar 20 18:26:18 1999
@@ -84,6 +84,9 @@
 bool 'System V IPC' CONFIG_SYSVIPC
 bool 'BSD Process Accounting' CONFIG_BSD_PROCESS_ACCT
 bool 'Sysctl support' CONFIG_SYSCTL
+if [ "$CONFIG_EXPERIMENTAL" = "y" ]; then
+  tristate 'LibGTop support' CONFIG_LIBGTOP
+fi
 tristate 'Kernel support for a.out binaries' CONFIG_BINFMT_AOUT
 tristate 'Kernel support for ELF binaries' CONFIG_BINFMT_ELF
 tristate 'Kernel support for MISC binaries' CONFIG_BINFMT_MISC
diff -ru linux-2.2.1/include/linux/sysctl.h hacker/include/linux/sysctl.h
--- linux-2.2.1/include/linux/sysctl.h	Sun Jan 31 22:24:14 1999
+++ hacker/include/linux/sysctl.h	Sat Mar 20 19:12:54 1999
@@ -56,7 +56,8 @@
 	CTL_PROC=4,		/* Process info */
 	CTL_FS=5,		/* Filesystems */
 	CTL_DEBUG=6,		/* Debugging */
-	CTL_DEV=7		/* Devices */
+	CTL_DEV=7,		/* Devices */
+	CTL_LIBGTOP=408		/* LibGTop */
 };
 
 
diff -ru linux-2.2.1/kernel/sysctl.c hacker/kernel/sysctl.c
--- linux-2.2.1/kernel/sysctl.c	Sun Jan 31 22:24:43 1999
+++ hacker/kernel/sysctl.c	Sat Mar 20 19:24:34 1999
@@ -82,7 +82,9 @@
 static ctl_table fs_table[];
 static ctl_table debug_table[];
 static ctl_table dev_table[];
-
+#ifdef CONFIG_LIBGTOP
+extern ctl_table libgtop_table[];
+#endif
 
 /* /proc declarations: */
 
@@ -148,6 +150,9 @@
 	{CTL_FS, "fs", NULL, 0, 0555, fs_table},
 	{CTL_DEBUG, "debug", NULL, 0, 0555, debug_table},
         {CTL_DEV, "dev", NULL, 0, 0555, dev_table},
+#ifdef CONFIG_LIBGTOP
+	{CTL_LIBGTOP, "libgtop", NULL, 0, 0555, libgtop_table},
+#endif
 	{0}
 };
 
